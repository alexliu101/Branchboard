import"../chunks/DsnmJJEf.js";import"../chunks/Du8ZBg6i.js";import{o as Pt,h as Vt,e as S,s as g}from"../chunks/B_eIANii.js";import{p as Wt,n as it,o as Xt,q as _,v as N,g as t,w as h,x as Yt,y as i,d as n,z as r,A as w,B as q,$ as Zt,C as a,j as F,D as rt}from"../chunks/CdyQOU9H.js";import{i as Q,s as It,a as vt}from"../chunks/DEBHm2Tm.js";import{e as U,f as ts,s as x,d as nt,i as R,c as ss,b as as}from"../chunks/VGP-E5PP.js";import{b as es,r as is}from"../chunks/B43XAVa5.js";import{s as lt}from"../chunks/BRvGNipy.js";import{i as rs}from"../chunks/Bdm87UUO.js";var vs=_('<div class="branch-notification svelte-ihgp95"><div class="notification-content svelte-ihgp95"><div class="notification-header svelte-ihgp95"><span class="notification-icon svelte-ihgp95">🔔</span> <strong class="svelte-ihgp95">Signal Triggered</strong></div> <div class="notification-details svelte-ihgp95"><p class="svelte-ihgp95"><strong class="svelte-ihgp95"> </strong> </p> <p class="svelte-ihgp95">Consider switching to: <strong class="svelte-ihgp95"> </strong></p></div></div> <div class="notification-actions svelte-ihgp95"><button class="btn btn-primary btn-sm svelte-ihgp95">Switch Branch</button> <button class="btn btn-secondary btn-sm svelte-ihgp95">Dismiss</button></div></div>'),ns=_('<button class="btn btn-primary btn-sm svelte-ihgp95">▶️ Start Focus</button>'),ls=_('<button class="btn btn-secondary btn-sm svelte-ihgp95">⏹️ Stop</button>'),cs=_('<span class="signal-tag triggered svelte-ihgp95"> </span>'),os=_('<div class="branch-signals svelte-ihgp95"><strong class="svelte-ihgp95">Active Signals:</strong> <!></div>'),ds=_('<div class="branch-signals svelte-ihgp95"><strong class="svelte-ihgp95">Status:</strong> <span class="signal-tag svelte-ihgp95">Monitoring for changes</span></div>'),ps=_('<button class="btn btn-success btn-sm svelte-ihgp95">✓ Complete</button>'),gs=_('<span class="completed-badge svelte-ihgp95">✅ Done</span>'),hs=_('<div><div class="task-header svelte-ihgp95"><span class="task-title svelte-ihgp95"> </span> <span class="task-duration svelte-ihgp95"> </span></div> <div class="task-schedule svelte-ihgp95"><small class="task-time svelte-ihgp95"> </small></div> <div class="task-actions svelte-ihgp95"><!></div></div>'),_s=_('<div class="task-card card empty-state svelte-ihgp95"><p class="svelte-ihgp95">No scheduled tasks</p> <small class="svelte-ihgp95">Try optimizing your schedule</small></div>'),us=_('<button class="btn btn-success btn-sm svelte-ihgp95">✓ Complete</button>'),ms=_('<span class="completed-badge svelte-ihgp95">✅ Done</span>'),bs=_('<div><div class="task-header svelte-ihgp95"><span class="task-title svelte-ihgp95"> </span> <span class="task-duration svelte-ihgp95"> </span></div> <div class="task-schedule svelte-ihgp95"><small class="task-time svelte-ihgp95"> </small></div> <div class="task-actions svelte-ihgp95"><!></div></div>'),ks=_('<div class="task-card card empty-state svelte-ihgp95"><p class="svelte-ihgp95">No next tasks</p></div>'),fs=_('<button class="btn btn-success btn-sm svelte-ihgp95">✓ Complete</button>'),ys=_('<span class="completed-badge svelte-ihgp95">✅ Done</span>'),Ss=_('<div><div class="task-header svelte-ihgp95"><span class="task-title svelte-ihgp95"> </span> <span class="task-duration svelte-ihgp95"> </span></div> <div class="task-schedule svelte-ihgp95"><small class="task-time svelte-ihgp95"> </small></div> <div class="task-actions svelte-ihgp95"><!></div></div>'),ws=_('<div class="task-card card empty-state svelte-ihgp95"><p class="svelte-ihgp95">No later tasks</p></div>'),xs=_(`<div class="today-container svelte-ihgp95"><!> <div class="today-header svelte-ihgp95"><div class="time-display svelte-ihgp95"><div class="current-time svelte-ihgp95"> </div> <div class="current-date svelte-ihgp95"> </div></div> <div class="focus-timer svelte-ihgp95"><div class="timer-display svelte-ihgp95"> </div> <div class="timer-controls svelte-ihgp95"><!></div></div></div> <div class="current-branch-card card svelte-ihgp95"><div class="card-title svelte-ihgp95">🎯 Current Branch</div> <div class="branch-info svelte-ihgp95"><div class="branch-scenario svelte-ihgp95"><strong class="svelte-ihgp95"> </strong> </div> <div class="branch-confidence svelte-ihgp95"> </div> <!></div></div> <div class="tasks-section svelte-ihgp95"><h2 class="svelte-ihgp95">📋 Today's Focus</h2> <div class="task-columns grid grid-3 svelte-ihgp95"><div class="task-column svelte-ihgp95"><h3 class="svelte-ihgp95">🔥 Now</h3> <div class="tasks-list svelte-ihgp95"></div></div> <div class="task-column svelte-ihgp95"><h3 class="svelte-ihgp95">⏭️ Next</h3> <div class="tasks-list svelte-ihgp95"></div></div> <div class="task-column svelte-ihgp95"><h3 class="svelte-ihgp95">📅 Later</h3> <div class="tasks-list svelte-ihgp95"></div></div></div></div> <div class="quick-capture card svelte-ihgp95"><div class="card-title svelte-ihgp95">💭 Quick Capture</div> <div class="capture-form flex gap-2 svelte-ihgp95"><input type="text" placeholder="Quick note or task..." class="w-full svelte-ihgp95"/> <button class="btn btn-primary svelte-ihgp95">+ Add</button></div></div></div>`);function As(Tt,Dt){Wt(Dt,!1);const G=()=>vt(ss,"$currentBranches",H),L=()=>vt(ts,"$focusTimer",H),$t=()=>vt(as,"$branchSwitchNotifications",H),[H,Bt]=It(),ct=q(),ot=q();let A=q(new Date),E=q(""),$=q([]),b=q({});Pt(async()=>{await x.initializeData(),await x.loadSchedule();const e=setInterval(()=>{w(A,new Date),dt()},6e4);return dt(),J(),()=>{clearInterval(e)}});async function dt(){w($,await x.getDailySchedule(new Date))}async function J(){try{const e=await x.getCurrentBranches?.()||G();if(e.length>0){const s=e[0];let v=null,c=null;s.eventId?(v=await nt.getEvent(s.eventId),c="event"):s.scenarioId&&(v=await nt.getScenario(s.scenarioId),c="scenario");const o=(await nt.getSignalsForNode(s.id)).filter(p=>p.isTriggered);w(b,{branch:s.description,parent:v?.title||"Unknown",parentType:c,confidence:75,recentSignals:o.slice(0,3)})}else w(b,{branch:"No active branch",parent:"Set up scenarios in Upcoming",parentType:null,confidence:0,recentSignals:[]})}catch(e){console.error("Error loading current branch info:",e),w(b,{branch:"Error loading branch",parent:"Check your data",parentType:null,confidence:0,recentSignals:[]})}}function Ct(){L().start()}function Lt(){L().stop()}function Nt(e){const s=Math.floor(e/60),v=e%60;return`${s.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`}function K(e){x.completeTask(e)}function pt(){t(E).trim()&&(x.quickCapture(t(E),"task"),w(E,""))}async function qt(e){await x.switchBranch(e.eventId,e.scenarioId,e.recommendedBranchId),x.dismissBranchNotification(e.id),await J()}function Ft(e){x.dismissBranchNotification(e)}it(()=>t(A),()=>{w(ct,t(A).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}),it(()=>t(A),()=>{w(ot,t(A).toLocaleDateString([],{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}),it(()=>G(),()=>{G()&&J()}),Xt(),rs();var O=xs();Vt(e=>{Zt.title="Today - Branchboard"});var gt=i(O);U(gt,1,$t,R,(e,s)=>{var v=vs(),c=i(v),u=r(i(c),2),o=i(u),p=i(o),B=i(p,!0);a(p);var f=r(p);a(o);var T=r(o,2),m=r(i(T)),y=i(m);a(m),a(T),a(u),a(c);var D=r(c,2),k=i(D),C=r(k,2);a(D),a(v),N(()=>{g(B,(t(s),n(()=>t(s).signalData.signalName))),g(f,`: 
						${t(s),n(()=>t(s).signalData.value)??""} ${t(s),n(()=>t(s).signalData.direction)??""} ${t(s),n(()=>t(s).signalData.threshold)??""}`),g(y,`"${t(s),n(()=>t(s).signalData.branchDescription)??""}"`)}),S("click",k,()=>qt(t(s))),S("click",C,()=>Ft(t(s).id)),h(e,v)});var P=r(gt,2),V=i(P),W=i(V),At=i(W,!0);a(W);var ht=r(W,2),Et=i(ht,!0);a(ht),a(V);var _t=r(V,2),X=i(_t),zt=i(X,!0);a(X);var ut=r(X,2),Mt=i(ut);{var Qt=e=>{var s=ns();S("click",s,Ct),h(e,s)},Ut=e=>{var s=ls();S("click",s,Lt),h(e,s)};Q(Mt,e=>{L(),n(()=>!L().isRunning)?e(Qt):e(Ut,!1)})}a(ut),a(_t),a(P);var Y=r(P,2),mt=r(i(Y),2),Z=i(mt),I=i(Z),Rt=i(I,!0);a(I);var jt=r(I);a(Z);var tt=r(Z,2),Gt=i(tt);a(tt);var Ht=r(tt,2);{var Jt=e=>{var s=os(),v=r(i(s),2);U(v,1,()=>(t(b),n(()=>t(b).recentSignals)),R,(c,u)=>{var o=cs(),p=i(o,!0);a(o),N(()=>g(p,(t(u),n(()=>t(u).metricName)))),h(c,o)}),a(s),h(e,s)},Kt=e=>{var s=ds();h(e,s)};Q(Ht,e=>{t(b),n(()=>t(b).recentSignals?.length>0)?e(Jt):e(Kt,!1)})}a(mt),a(Y);var st=r(Y,2),bt=r(i(st),2),at=i(bt),kt=r(i(at),2);U(kt,5,()=>(t($),n(()=>t($).slice(0,1))),R,(e,s)=>{const v=rt(()=>(t(s),n(()=>t(s).task)));var c=hs();let u;var o=i(c),p=i(o),B=i(p,!0);a(p);var f=r(p,2),T=i(f);a(f),a(o);var m=r(o,2),y=i(m),D=i(y);a(y),a(m);var k=r(m,2),C=i(k);{var z=l=>{var d=ps();S("click",d,()=>K(t(v).id)),h(l,d)},M=l=>{var d=gs();h(l,d)};Q(C,l=>{F(t(v)),n(()=>t(v).status!=="completed")?l(z):l(M,!1)})}a(k),a(c),N((l,d)=>{u=lt(c,1,"task-card card svelte-ihgp95",null,u,l),g(B,(F(t(v)),n(()=>t(v).title))),g(T,`${t(s),n(()=>t(s).duration)??""}h`),g(D,`⏰ ${d??""}`)},[()=>({completed:t(v).status==="completed"}),()=>(t(s),n(()=>new Date(t(s).startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})))]),h(e,c)},e=>{var s=_s();h(e,s)}),a(kt),a(at);var et=r(at,2),ft=r(i(et),2);U(ft,5,()=>(t($),n(()=>t($).slice(1,2))),R,(e,s)=>{const v=rt(()=>(t(s),n(()=>t(s).task)));var c=bs();let u;var o=i(c),p=i(o),B=i(p,!0);a(p);var f=r(p,2),T=i(f);a(f),a(o);var m=r(o,2),y=i(m),D=i(y);a(y),a(m);var k=r(m,2),C=i(k);{var z=l=>{var d=us();S("click",d,()=>K(t(v).id)),h(l,d)},M=l=>{var d=ms();h(l,d)};Q(C,l=>{F(t(v)),n(()=>t(v).status!=="completed")?l(z):l(M,!1)})}a(k),a(c),N((l,d)=>{u=lt(c,1,"task-card card svelte-ihgp95",null,u,l),g(B,(F(t(v)),n(()=>t(v).title))),g(T,`${t(s),n(()=>t(s).duration)??""}h`),g(D,`⏰ ${d??""}`)},[()=>({completed:t(v).status==="completed"}),()=>(t(s),n(()=>new Date(t(s).startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})))]),h(e,c)},e=>{var s=ks();h(e,s)}),a(ft),a(et);var yt=r(et,2),St=r(i(yt),2);U(St,5,()=>(t($),n(()=>t($).slice(2,4))),R,(e,s)=>{const v=rt(()=>(t(s),n(()=>t(s).task)));var c=Ss();let u;var o=i(c),p=i(o),B=i(p,!0);a(p);var f=r(p,2),T=i(f);a(f),a(o);var m=r(o,2),y=i(m),D=i(y);a(y),a(m);var k=r(m,2),C=i(k);{var z=l=>{var d=fs();S("click",d,()=>K(t(v).id)),h(l,d)},M=l=>{var d=ys();h(l,d)};Q(C,l=>{F(t(v)),n(()=>t(v).status!=="completed")?l(z):l(M,!1)})}a(k),a(c),N((l,d)=>{u=lt(c,1,"task-card card svelte-ihgp95",null,u,l),g(B,(F(t(v)),n(()=>t(v).title))),g(T,`${t(s),n(()=>t(s).duration)??""}h`),g(D,`⏰ ${d??""}`)},[()=>({completed:t(v).status==="completed"}),()=>(t(s),n(()=>new Date(t(s).startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})))]),h(e,c)},e=>{var s=ws();h(e,s)}),a(St),a(yt),a(bt),a(st);var wt=r(st,2),xt=r(i(wt),2),j=i(xt);is(j);var Ot=r(j,2);a(xt),a(wt),a(O),N(e=>{g(At,t(ct)),g(Et,t(ot)),g(zt,e),g(Rt,(t(b),n(()=>t(b).parent))),g(jt,` → ${t(b),n(()=>t(b).branch)??""}`),g(Gt,`Confidence: ${t(b),n(()=>t(b).confidence)??""}%`)},[()=>(L(),n(()=>Nt(L().timeRemaining)))]),es(j,()=>t(E),e=>w(E,e)),S("keydown",j,e=>e.key==="Enter"&&pt()),S("click",Ot,pt),h(Tt,O),Yt(),Bt()}export{As as component};
